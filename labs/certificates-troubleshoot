

#################### Tue Nov 28 12:59:44 EST 2023 ####################


Checking prerequisites for Guided Exercise: Troubleshooting OpenShift Certificates

 Verify the OpenShift cluster is running:


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Waiting for the cluster to start (be patient)............... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
Waiting for OpenShift cluster start...
API is up
Cluster version is 4.10.20
Router is up
Waiting for authentication...
Waiting for authentication...
Waiting for authentication...
Authentication is ready
The ingress operator is ready
The kube-apiserver operator is ready
Machine Config Operator changes applied
API is up
Cluster version is 4.10.20
Router is up
Authentication is ready
The ingress operator is ready
The kube-apiserver operator is ready
Machine Config Operator changes applied
API is up
Cluster version is 4.10.20
Router is up
Authentication is ready
The ingress operator is ready
The kube-apiserver operator is ready
Machine Config Operator changes applied
[32m[OK][0m OpenShift cluster ready.
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Router pods are available................................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!
                    <a href="/oauth/authorize?client_id=console&amp;idp=kube%3Aadmin&amp;redirect_uri=https%3A%2F%2Fconsole-openshift-console.apps.ocp4.example.com%2Fauth%2Fcallback&amp;response_type=code&amp;scope=user%3Afull&amp;state=7fe6cc20" class="pf-c-button pf-m-secondary pf-m-block" title="Log in with kube:admin">kube:admin</a>


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· OAuth pods are available.................................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· API pods are available...................................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Control plane node 'master01' is ready...................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Control plane node 'master02' is ready...................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Control plane node 'master03' is ready...................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!
ocp:x:974:974:User to test OpenShift cluster:/home/ocp:/bin/bash
Login successful.

You have access to 66 projects, the list has been suppressed. You can list all projects with 'oc projects'

Using project "default".
Login successful.

You have access to 66 projects, the list has been suppressed. You can list all projects with 'oc projects'

Using project "default".
NAME                                  SHORTNAMES          APIVERSION                                    NAMESPACED   KIND
bindings                                                  v1                                            true         Binding
componentstatuses                     cs                  v1                                            false        ComponentStatus
configmaps                            cm                  v1                                            true         ConfigMap
endpoints                             ep                  v1                                            true         Endpoints
events                                ev                  v1                                            true         Event
limitranges                           limits              v1                                            true         LimitRange
namespaces                            ns                  v1                                            false        Namespace
nodes                                 no                  v1                                            false        Node
persistentvolumeclaims                pvc                 v1                                            true         PersistentVolumeClaim
persistentvolumes                     pv                  v1                                            false        PersistentVolume
pods                                  po                  v1                                            true         Pod
podtemplates                                              v1                                            true         PodTemplate
replicationcontrollers                rc                  v1                                            true         ReplicationController
resourcequotas                        quota               v1                                            true         ResourceQuota
secrets                                                   v1                                            true         Secret
serviceaccounts                       sa                  v1                                            true         ServiceAccount
services                              svc                 v1                                            true         Service
mutatingwebhookconfigurations                             admissionregistration.k8s.io/v1               false        MutatingWebhookConfiguration
validatingwebhookconfigurations                           admissionregistration.k8s.io/v1               false        ValidatingWebhookConfiguration
customresourcedefinitions             crd,crds            apiextensions.k8s.io/v1                       false        CustomResourceDefinition
apiservices                                               apiregistration.k8s.io/v1                     false        APIService
apirequestcounts                                          apiserver.openshift.io/v1                     false        APIRequestCount
controllerrevisions                                       apps/v1                                       true         ControllerRevision
daemonsets                            ds                  apps/v1                                       true         DaemonSet
deployments                           deploy              apps/v1                                       true         Deployment
replicasets                           rs                  apps/v1                                       true         ReplicaSet
statefulsets                          sts                 apps/v1                                       true         StatefulSet
deploymentconfigs                     dc                  apps.openshift.io/v1                          true         DeploymentConfig
tokenreviews                                              authentication.k8s.io/v1                      false        TokenReview
localsubjectaccessreviews                                 authorization.k8s.io/v1                       true         LocalSubjectAccessReview
selfsubjectaccessreviews                                  authorization.k8s.io/v1                       false        SelfSubjectAccessReview
selfsubjectrulesreviews                                   authorization.k8s.io/v1                       false        SelfSubjectRulesReview
subjectaccessreviews                                      authorization.k8s.io/v1                       false        SubjectAccessReview
clusterrolebindings                                       authorization.openshift.io/v1                 false        ClusterRoleBinding
clusterroles                                              authorization.openshift.io/v1                 false        ClusterRole
localresourceaccessreviews                                authorization.openshift.io/v1                 true         LocalResourceAccessReview
localsubjectaccessreviews                                 authorization.openshift.io/v1                 true         LocalSubjectAccessReview
resourceaccessreviews                                     authorization.openshift.io/v1                 false        ResourceAccessReview
rolebindingrestrictions                                   authorization.openshift.io/v1                 true         RoleBindingRestriction
rolebindings                                              authorization.openshift.io/v1                 true         RoleBinding
roles                                                     authorization.openshift.io/v1                 true         Role
selfsubjectrulesreviews                                   authorization.openshift.io/v1                 true         SelfSubjectRulesReview
subjectaccessreviews                                      authorization.openshift.io/v1                 false        SubjectAccessReview
subjectrulesreviews                                       authorization.openshift.io/v1                 true         SubjectRulesReview
horizontalpodautoscalers              hpa                 autoscaling/v2                                true         HorizontalPodAutoscaler
clusterautoscalers                    ca                  autoscaling.openshift.io/v1                   false        ClusterAutoscaler
machineautoscalers                    ma                  autoscaling.openshift.io/v1beta1              true         MachineAutoscaler
cronjobs                              cj                  batch/v1                                      true         CronJob
jobs                                                      batch/v1                                      true         Job
buildconfigs                          bc                  build.openshift.io/v1                         true         BuildConfig
builds                                                    build.openshift.io/v1                         true         Build
certificatesigningrequests            csr                 certificates.k8s.io/v1                        false        CertificateSigningRequest
credentialsrequests                                       cloudcredential.openshift.io/v1               true         CredentialsRequest
apiservers                                                config.openshift.io/v1                        false        APIServer
authentications                                           config.openshift.io/v1                        false        Authentication
builds                                                    config.openshift.io/v1                        false        Build
clusteroperators                      co                  config.openshift.io/v1                        false        ClusterOperator
clusterversions                                           config.openshift.io/v1                        false        ClusterVersion
consoles                                                  config.openshift.io/v1                        false        Console
dnses                                                     config.openshift.io/v1                        false        DNS
featuregates                                              config.openshift.io/v1                        false        FeatureGate
imagecontentpolicies                                      config.openshift.io/v1                        false        ImageContentPolicy
images                                                    config.openshift.io/v1                        false        Image
infrastructures                                           config.openshift.io/v1                        false        Infrastructure
ingresses                                                 config.openshift.io/v1                        false        Ingress
networks                                                  config.openshift.io/v1                        false        Network
oauths                                                    config.openshift.io/v1                        false        OAuth
operatorhubs                                              config.openshift.io/v1                        false        OperatorHub
projects                                                  config.openshift.io/v1                        false        Project
proxies                                                   config.openshift.io/v1                        false        Proxy
schedulers                                                config.openshift.io/v1                        false        Scheduler
consoleclidownloads                                       console.openshift.io/v1                       false        ConsoleCLIDownload
consoleexternalloglinks                                   console.openshift.io/v1                       false        ConsoleExternalLogLink
consolelinks                                              console.openshift.io/v1                       false        ConsoleLink
consolenotifications                                      console.openshift.io/v1                       false        ConsoleNotification
consoleplugins                                            console.openshift.io/v1alpha1                 false        ConsolePlugin
consolequickstarts                                        console.openshift.io/v1                       false        ConsoleQuickStart
consoleyamlsamples                                        console.openshift.io/v1                       false        ConsoleYAMLSample
podnetworkconnectivitychecks                              controlplane.operator.openshift.io/v1alpha1   true         PodNetworkConnectivityCheck
leases                                                    coordination.k8s.io/v1                        true         Lease
endpointslices                                            discovery.k8s.io/v1                           true         EndpointSlice
events                                ev                  events.k8s.io/v1                              true         Event
fileintegrities                                           fileintegrity.openshift.io/v1alpha1           true         FileIntegrity
fileintegritynodestatuses                                 fileintegrity.openshift.io/v1alpha1           true         FileIntegrityNodeStatus
flowschemas                                               flowcontrol.apiserver.k8s.io/v1beta2          false        FlowSchema
prioritylevelconfigurations                               flowcontrol.apiserver.k8s.io/v1beta2          false        PriorityLevelConfiguration
helmchartrepositories                                     helm.openshift.io/v1beta1                     false        HelmChartRepository
projecthelmchartrepositories                              helm.openshift.io/v1beta1                     true         ProjectHelmChartRepository
images                                                    image.openshift.io/v1                         false        Image
imagesignatures                                           image.openshift.io/v1                         false        ImageSignature
imagestreamimages                     isimage             image.openshift.io/v1                         true         ImageStreamImage
imagestreamimports                                        image.openshift.io/v1                         true         ImageStreamImport
imagestreammappings                                       image.openshift.io/v1                         true         ImageStreamMapping
imagestreams                          is                  image.openshift.io/v1                         true         ImageStream
imagestreamtags                       istag               image.openshift.io/v1                         true         ImageStreamTag
imagetags                             itag                image.openshift.io/v1                         true         ImageTag
configs                                                   imageregistry.operator.openshift.io/v1        false        Config
imagepruners                                              imageregistry.operator.openshift.io/v1        false        ImagePruner
dnsrecords                                                ingress.operator.openshift.io/v1              true         DNSRecord
network-attachment-definitions        net-attach-def      k8s.cni.cncf.io/v1                            true         NetworkAttachmentDefinition
machinehealthchecks                   mhc,mhcs            machine.openshift.io/v1beta1                  true         MachineHealthCheck
machines                                                  machine.openshift.io/v1beta1                  true         Machine
machinesets                                               machine.openshift.io/v1beta1                  true         MachineSet
containerruntimeconfigs               ctrcfg              machineconfiguration.openshift.io/v1          false        ContainerRuntimeConfig
controllerconfigs                                         machineconfiguration.openshift.io/v1          false        ControllerConfig
kubeletconfigs                                            machineconfiguration.openshift.io/v1          false        KubeletConfig
machineconfigpools                    mcp                 machineconfiguration.openshift.io/v1          false        MachineConfigPool
machineconfigs                        mc                  machineconfiguration.openshift.io/v1          false        MachineConfig
baremetalhosts                        bmh,bmhost          metal3.io/v1alpha1                            true         BareMetalHost
bmceventsubscriptions                 bes,bmcevent        metal3.io/v1alpha1                            true         BMCEventSubscription
firmwareschemas                                           metal3.io/v1alpha1                            true         FirmwareSchema
hostfirmwaresettings                  hfs                 metal3.io/v1alpha1                            true         HostFirmwareSettings
preprovisioningimages                 ppimg               metal3.io/v1alpha1                            true         PreprovisioningImage
provisionings                                             metal3.io/v1alpha1                            false        Provisioning
nodes                                                     metrics.k8s.io/v1beta1                        false        NodeMetrics
pods                                                      metrics.k8s.io/v1beta1                        true         PodMetrics
storagestates                                             migration.k8s.io/v1alpha1                     false        StorageState
storageversionmigrations                                  migration.k8s.io/v1alpha1                     false        StorageVersionMigration
alertmanagerconfigs                                       monitoring.coreos.com/v1alpha1                true         AlertmanagerConfig
alertmanagers                                             monitoring.coreos.com/v1                      true         Alertmanager
podmonitors                                               monitoring.coreos.com/v1                      true         PodMonitor
probes                                                    monitoring.coreos.com/v1                      true         Probe
prometheuses                                              monitoring.coreos.com/v1                      true         Prometheus
prometheusrules                                           monitoring.coreos.com/v1                      true         PrometheusRule
servicemonitors                                           monitoring.coreos.com/v1                      true         ServiceMonitor
thanosrulers                                              monitoring.coreos.com/v1                      true         ThanosRuler
clusternetworks                                           network.openshift.io/v1                       false        ClusterNetwork
egressnetworkpolicies                                     network.openshift.io/v1                       true         EgressNetworkPolicy
hostsubnets                                               network.openshift.io/v1                       false        HostSubnet
netnamespaces                                             network.openshift.io/v1                       false        NetNamespace
egressrouters                                             network.operator.openshift.io/v1              true         EgressRouter
operatorpkis                                              network.operator.openshift.io/v1              true         OperatorPKI
ingressclasses                                            networking.k8s.io/v1                          false        IngressClass
ingresses                             ing                 networking.k8s.io/v1                          true         Ingress
networkpolicies                       netpol              networking.k8s.io/v1                          true         NetworkPolicy
runtimeclasses                                            node.k8s.io/v1                                false        RuntimeClass
oauthaccesstokens                                         oauth.openshift.io/v1                         false        OAuthAccessToken
oauthauthorizetokens                                      oauth.openshift.io/v1                         false        OAuthAuthorizeToken
oauthclientauthorizations                                 oauth.openshift.io/v1                         false        OAuthClientAuthorization
oauthclients                                              oauth.openshift.io/v1                         false        OAuthClient
tokenreviews                                              oauth.openshift.io/v1                         false        TokenReview
useroauthaccesstokens                                     oauth.openshift.io/v1                         false        UserOAuthAccessToken
authentications                                           operator.openshift.io/v1                      false        Authentication
cloudcredentials                                          operator.openshift.io/v1                      false        CloudCredential
clustercsidrivers                                         operator.openshift.io/v1                      false        ClusterCSIDriver
configs                                                   operator.openshift.io/v1                      false        Config
consoles                                                  operator.openshift.io/v1                      false        Console
csisnapshotcontrollers                                    operator.openshift.io/v1                      false        CSISnapshotController
dnses                                                     operator.openshift.io/v1                      false        DNS
etcds                                                     operator.openshift.io/v1                      false        Etcd
imagecontentsourcepolicies                                operator.openshift.io/v1alpha1                false        ImageContentSourcePolicy
ingresscontrollers                                        operator.openshift.io/v1                      true         IngressController
kubeapiservers                                            operator.openshift.io/v1                      false        KubeAPIServer
kubecontrollermanagers                                    operator.openshift.io/v1                      false        KubeControllerManager
kubeschedulers                                            operator.openshift.io/v1                      false        KubeScheduler
kubestorageversionmigrators                               operator.openshift.io/v1                      false        KubeStorageVersionMigrator
networks                                                  operator.openshift.io/v1                      false        Network
openshiftapiservers                                       operator.openshift.io/v1                      false        OpenShiftAPIServer
openshiftcontrollermanagers                               operator.openshift.io/v1                      false        OpenShiftControllerManager
servicecas                                                operator.openshift.io/v1                      false        ServiceCA
storages                                                  operator.openshift.io/v1                      false        Storage
catalogsources                        catsrc              operators.coreos.com/v1alpha1                 true         CatalogSource
clusterserviceversions                csv,csvs            operators.coreos.com/v1alpha1                 true         ClusterServiceVersion
installplans                          ip                  operators.coreos.com/v1alpha1                 true         InstallPlan
olmconfigs                                                operators.coreos.com/v1                       false        OLMConfig
operatorconditions                    condition           operators.coreos.com/v2                       true         OperatorCondition
operatorgroups                        og                  operators.coreos.com/v1                       true         OperatorGroup
operators                                                 operators.coreos.com/v1                       false        Operator
subscriptions                         sub,subs            operators.coreos.com/v1alpha1                 true         Subscription
packagemanifests                                          packages.operators.coreos.com/v1              true         PackageManifest
poddisruptionbudgets                  pdb                 policy/v1                                     true         PodDisruptionBudget
podsecuritypolicies                   psp                 policy/v1beta1                                false        PodSecurityPolicy
projectrequests                                           project.openshift.io/v1                       false        ProjectRequest
projects                                                  project.openshift.io/v1                       false        Project
appliedclusterresourcequotas                              quota.openshift.io/v1                         true         AppliedClusterResourceQuota
clusterresourcequotas                 clusterquota        quota.openshift.io/v1                         false        ClusterResourceQuota
clusterrolebindings                                       rbac.authorization.k8s.io/v1                  false        ClusterRoleBinding
clusterroles                                              rbac.authorization.k8s.io/v1                  false        ClusterRole
rolebindings                                              rbac.authorization.k8s.io/v1                  true         RoleBinding
roles                                                     rbac.authorization.k8s.io/v1                  true         Role
routes                                                    route.openshift.io/v1                         true         Route
configs                                                   samples.operator.openshift.io/v1              false        Config
priorityclasses                       pc                  scheduling.k8s.io/v1                          false        PriorityClass
rangeallocations                                          security.internal.openshift.io/v1             false        RangeAllocation
podsecuritypolicyreviews                                  security.openshift.io/v1                      true         PodSecurityPolicyReview
podsecuritypolicyselfsubjectreviews                       security.openshift.io/v1                      true         PodSecurityPolicySelfSubjectReview
podsecuritypolicysubjectreviews                           security.openshift.io/v1                      true         PodSecurityPolicySubjectReview
rangeallocations                                          security.openshift.io/v1                      false        RangeAllocation
securitycontextconstraints            scc                 security.openshift.io/v1                      false        SecurityContextConstraints
volumesnapshotclasses                 vsclass,vsclasses   snapshot.storage.k8s.io/v1                    false        VolumeSnapshotClass
volumesnapshotcontents                vsc,vscs            snapshot.storage.k8s.io/v1                    false        VolumeSnapshotContent
volumesnapshots                       vs                  snapshot.storage.k8s.io/v1                    true         VolumeSnapshot
csidrivers                                                storage.k8s.io/v1                             false        CSIDriver
csinodes                                                  storage.k8s.io/v1                             false        CSINode
csistoragecapacities                                      storage.k8s.io/v1beta1                        true         CSIStorageCapacity
storageclasses                        sc                  storage.k8s.io/v1                             false        StorageClass
volumeattachments                                         storage.k8s.io/v1                             false        VolumeAttachment
brokertemplateinstances                                   template.openshift.io/v1                      false        BrokerTemplateInstance
processedtemplates                                        template.openshift.io/v1                      true         Template
templateinstances                                         template.openshift.io/v1                      true         TemplateInstance
templates                                                 template.openshift.io/v1                      true         Template
profiles                                                  tuned.openshift.io/v1                         true         Profile
tuneds                                                    tuned.openshift.io/v1                         true         Tuned
groups                                                    user.openshift.io/v1                          false        Group
identities                                                user.openshift.io/v1                          false        Identity
useridentitymappings                                      user.openshift.io/v1                          false        UserIdentityMapping
users                                                     user.openshift.io/v1                          false        User
ippools                                                   whereabouts.cni.cncf.io/v1alpha1              true         IPPool
overlappingrangeipreservations                            whereabouts.cni.cncf.io/v1alpha1              true         OverlappingRangeIPReservation
ocp:x:974:974:User to test OpenShift cluster:/home/ocp:/bin/bash
Login successful.

You have access to 66 projects, the list has been suppressed. You can list all projects with 'oc projects'

Using project "default".
Login successful.

You have access to 66 projects, the list has been suppressed. You can list all projects with 'oc projects'

Using project "default".


Setting up the classroom for Guided Exercise: Troubleshooting OpenShift Certificates

 Preparing the student's cluster:


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Download exercise files..................................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
/home/student/DO380/labs /home/student
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!
/home/student


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Modifying /etc/ansible/ansible.cfg.......................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Backing up PKI configuration................................ !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

PLAY [Backing up PKI configuration files] **************************************

TASK [include_role : backup] ***************************************************

TASK [backup : Ensure the backup directory exists] *****************************
ok: [localhost]

TASK [backup : Ensure the backup exists] ***************************************
changed: [localhost]

PLAY RECAP *********************************************************************
localhost                  : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Creating Classroom CA Certificate........................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

PLAY [Configure Classroom Certificate Authority] *******************************

TASK [Gathering Facts] *********************************************************
ok: [localhost]

TASK [Check if classroom-ca-key.pem exists] ************************************
ok: [localhost]

TASK [Generate a CA private key] ***********************************************
changed: [localhost]

TASK [Check if classroom-ca.pem exists] ****************************************
ok: [localhost]

TASK [Generate a CA certificate signing request] *******************************
changed: [localhost]

TASK [Generate a CA self-signed certificate] ***********************************
changed: [localhost]

TASK [Add comment to top of classroom-ca.pem] **********************************
changed: [localhost]

TASK [Create a certificate hard-link in /etc/pki/ca-trust/source/anchors/] *****
changed: [localhost]

TASK [Remove the CA CSR file] **************************************************
changed: [localhost]

TASK [Configure system to trust classroom-ca.pem] ******************************
changed: [localhost]

PLAY RECAP *********************************************************************
localhost                  : ok=10   changed=7    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Creating Wildcard Certificate............................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

PLAY [Create Wildcard Certificate] *********************************************

TASK [Gathering Facts] *********************************************************
ok: [localhost]

TASK [Classroom CA: Check if /etc/pki/tls/certs/classroom-ca.pem exists] *******
ok: [localhost]

TASK [Classroom CA: Fail if /etc/pki/tls/certs/classroom-ca.pem does not exist] ***
skipping: [localhost]

TASK [Classroom CA: Check if /etc/pki/tls/private/classroom-ca-key.pem exists] ***
ok: [localhost]

TASK [Classroom CA: Fail if /etc/pki/tls/private/classroom-ca-key.pem does not exist] ***
skipping: [localhost]

TASK [Check if wildcard.pem exists in /etc/pki/tls/certs/] *********************
ok: [localhost]

TASK [Check if wildcard.pem exists in /home/student/DO380/labs/certificates-troubleshoot] ***
ok: [localhost]

TASK [Check if wildcard-key.pem exists in /etc/pki/tls/private/] ***************
ok: [localhost]

TASK [Ensure certs directory exist] ********************************************
ok: [localhost]

TASK [Create a hard-link to the private key] ***********************************
skipping: [localhost]

TASK [Create a hard-link to the certificate] ***********************************
skipping: [localhost]

TASK [Remove certificate hard link] ********************************************
ok: [localhost]

TASK [Generate a wildcard private key] *****************************************
changed: [localhost]

TASK [Create a hard-link to the wildcard private key] **************************
changed: [localhost]

TASK [Generate a wildcard certificate signing request] *************************
changed: [localhost]

TASK [Generate a wildcard certificate] *****************************************
changed: [localhost]

TASK [Add comment to top of wildcard.pem] **************************************
changed: [localhost]

TASK [Create a hard-link to the wildcard certificate] **************************
changed: [localhost]

TASK [Remove the CSR file] *****************************************************
changed: [localhost]

TASK [Check if wildcard-combined.pem exists in /etc/pki/tls/certs/] ************
ok: [localhost]

TASK [Create a combined certificate] *******************************************
ok: [localhost]

TASK [Create a hard-link to the combined certificate] **************************
changed: [localhost]

PLAY RECAP *********************************************************************
localhost                  : ok=18   changed=8    unreachable=0    failed=0    skipped=4    rescued=0    ignored=0   

!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Creating 'wildcard-bundle' configuration map................ !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
configmap/wildcard-bundle created
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Patching the cluster-wide proxy............................. !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
proxy.config.openshift.io/cluster patched
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Creating 'wildcard-tls' secret.............................. !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
secret/wildcard-tls created
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Patching the default ingress controller operator............ !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
ingresscontroller.operator.openshift.io/default patched
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Creating Master API Certificate............................. !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

PLAY [Create Custom Certificate] ***********************************************

TASK [Gathering Facts] *********************************************************
ok: [localhost]

TASK [Classroom CA: Check if /etc/pki/tls/certs/classroom-ca.pem exists] *******
ok: [localhost]

TASK [Classroom CA: Fail if /etc/pki/tls/certs/classroom-ca.pem does not exist] ***
skipping: [localhost]

TASK [Classroom CA: Check if /etc/pki/tls/private/classroom-ca-key.pem exists] ***
ok: [localhost]

TASK [Classroom CA: Fail if /etc/pki/tls/private/classroom-ca-key.pem does not exist] ***
skipping: [localhost]

TASK [Check if api.pem exists in /etc/pki/tls/certs/] **************************
ok: [localhost]

TASK [Check if api.pem exists in /home/student/DO380/labs/certificates-troubleshoot] ***
ok: [localhost]

TASK [Check if api-key.pem exists in /etc/pki/tls/private/] ********************
ok: [localhost]

TASK [Ensure certs directory exist] ********************************************
ok: [localhost]

TASK [Create a hard-link to the private key] ***********************************
skipping: [localhost]

TASK [Create a hard-link to the certificate] ***********************************
skipping: [localhost]

TASK [Remove certificate hard link] ********************************************
ok: [localhost]

TASK [Generate a api private key] **********************************************
changed: [localhost]

TASK [Create a hard-link to the private key] ***********************************
changed: [localhost]

TASK [Generate a api certificate signing request] ******************************
changed: [localhost]

TASK [Generate a api certificate] **********************************************
changed: [localhost]

TASK [Add comment to top of api.pem] *******************************************
changed: [localhost]

TASK [Create a hard-link to the certificate] ***********************************
changed: [localhost]

TASK [Remove the CSR file] *****************************************************
changed: [localhost]

TASK [Check if api-combined.pem exists in /etc/pki/tls/certs/] *****************
ok: [localhost]

TASK [Create a combined certificate] *******************************************
ok: [localhost]

TASK [Create a hard-link to the combined certificate] **************************
changed: [localhost]

PLAY RECAP *********************************************************************
localhost                  : ok=18   changed=8    unreachable=0    failed=0    skipped=4    rescued=0    ignored=0   

!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Creating 'api-tls' secret................................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
secret/api-tls created
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Patching the cluster apiserver.............................. !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
apiserver.config.openshift.io/cluster patched
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!



!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!Overall start status........................................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!



#################### Tue Nov 28 13:34:38 EST 2023 ####################


Completing Guided Exercise: Troubleshooting OpenShift Certificates



!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Restoring PKI configuration................................. !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

PLAY [Restoring PKI configuration files] ***************************************

TASK [Ensure the custom PKI files are removed] *********************************
ok: [localhost] => (item=/etc/pki/tls/certs/classroom-ca.csr)
changed: [localhost] => (item=/etc/pki/tls/certs/classroom-ca.pem)
changed: [localhost] => (item=/etc/pki/tls/private/classroom-ca-key.pem)
changed: [localhost] => (item=/etc/pki/ca-trust/source/anchors/classroom-ca.pem)
ok: [localhost] => (item=/tmp/certs)
ok: [localhost] => (item=/etc/pki/tls/certs/wildcard-api.pem)
ok: [localhost] => (item=/etc/pki/tls/certs/wildcard-api.csr)
ok: [localhost] => (item=/etc/pki/tls/private/wildcard-api-key.pem)
ok: [localhost] => (item=/etc/pki/tls/certs/combined-cert.pem)
changed: [localhost] => (item=/etc/pki/tls/certs/wildcard.pem)
changed: [localhost] => (item=/etc/pki/tls/certs/wildcard-combined.pem)
changed: [localhost] => (item=/etc/pki/tls/private/wildcard-key.pem)
changed: [localhost] => (item=/etc/pki/tls/certs/api.pem)
changed: [localhost] => (item=/etc/pki/tls/certs/api-combined.pem)
ok: [localhost] => (item=/etc/pki/tls/certs/custom.pem)
ok: [localhost] => (item=/etc/pki/tls/private/custom-key.pem)
ok: [localhost] => (item=/etc/pki/tls/certs/custom-combined.pem)
ok: [localhost] => (item=/etc/pki/tls/private/custom-combined-key.pem)
changed: [localhost] => (item=/etc/pki/tls/private/api-key.pem)
ok: [localhost] => (item=/etc/pki/tls/certs/review.pem)
ok: [localhost] => (item=/etc/pki/tls/private/review-key.pem)
ok: [localhost] => (item=/etc/pki/tls/certs/review-combined.pem)
ok: [localhost] => (item=/etc/pki/tls/private/review-combined-key.pem)

TASK [include_role : restore] **************************************************

TASK [restore : Checking if the backup exists] *********************************
ok: [localhost]

TASK [restore : Ensure the backup is restored] *********************************
changed: [localhost]

TASK [restore : Ensure the backup is removed] **********************************
changed: [localhost]

PLAY RECAP *********************************************************************
localhost                  : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Cleaning up the OpenShift resources......................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

PLAY [Cleaning up OpenShift custom CA] *****************************************

TASK [Ensure the API server CA configuration is restored] **********************
changed: [localhost]

TASK [Ensure the proxy CA configuration is restored] ***************************
changed: [localhost]

TASK [Ensure the ingress controller CA configuration is restored] **************
changed: [localhost]

TASK [Ensure the exercise secrets are removed] *********************************
ok: [localhost] => (item={'name': 'custom-tls', 'namespace': 'openshift-config'})
ok: [localhost] => (item={'name': 'custom-tls-bundle', 'namespace': 'openshift-ingress'})
changed: [localhost] => (item={'name': 'wildcard-tls', 'namespace': 'openshift-ingress'})
changed: [localhost] => (item={'name': 'api-tls', 'namespace': 'openshift-config'})
ok: [localhost] => (item={'name': 'review-tls', 'namespace': 'openshift-ingress'})
ok: [localhost] => (item={'name': 'review-tls', 'namespace': 'openshift-config'})

TASK [Ensure the exercise configuration maps are removed] **********************
ok: [localhost] => (item={'name': 'combined-certs', 'namespace': 'openshift-config'})
changed: [localhost] => (item={'name': 'wildcard-bundle', 'namespace': 'openshift-config'})
ok: [localhost] => (item={'name': 'review-bundle', 'namespace': 'openshift-config'})

PLAY RECAP *********************************************************************
localhost                  : ok=5    changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Remove exercise files....................................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!

Please use start if you wish to do the exercise again.



#################### Sun Dec 10 03:05:39 EST 2023 ####################


Checking prerequisites for Guided Exercise: Troubleshooting OpenShift Certificates

 Verify the OpenShift cluster is running:


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Waiting for the cluster to start (be patient)............... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
Waiting for OpenShift cluster start...
API is up
Cluster version is 4.10.20
Router is up
Authentication is ready
The ingress operator is ready
The kube-apiserver operator is ready
Machine Config Operator changes applied
API is up
Cluster version is 4.10.20
Router is up
Authentication is ready
The ingress operator is ready
The kube-apiserver operator is ready
Machine Config Operator changes applied
API is up
Cluster version is 4.10.20
Router is up
Authentication is ready
The ingress operator is ready
The kube-apiserver operator is ready
Machine Config Operator changes applied
[32m[OK][0m OpenShift cluster ready.
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Router pods are available................................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!
                    <a href="/oauth/authorize?client_id=console&amp;idp=kube%3Aadmin&amp;redirect_uri=https%3A%2F%2Fconsole-openshift-console.apps.ocp4.example.com%2Fauth%2Fcallback&amp;response_type=code&amp;scope=user%3Afull&amp;state=5255e9db" class="pf-c-button pf-m-secondary pf-m-block" title="Log in with kube:admin">kube:admin</a>


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· OAuth pods are available.................................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· API pods are available...................................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Control plane node 'master01' is ready...................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Control plane node 'master02' is ready...................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Control plane node 'master03' is ready...................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!
ocp:x:974:974:User to test OpenShift cluster:/home/ocp:/bin/bash
Login successful.

You have access to 66 projects, the list has been suppressed. You can list all projects with 'oc projects'

Using project "default".
Login successful.

You have access to 66 projects, the list has been suppressed. You can list all projects with 'oc projects'

Using project "default".
NAME                                  SHORTNAMES          APIVERSION                                    NAMESPACED   KIND
bindings                                                  v1                                            true         Binding
componentstatuses                     cs                  v1                                            false        ComponentStatus
configmaps                            cm                  v1                                            true         ConfigMap
endpoints                             ep                  v1                                            true         Endpoints
events                                ev                  v1                                            true         Event
limitranges                           limits              v1                                            true         LimitRange
namespaces                            ns                  v1                                            false        Namespace
nodes                                 no                  v1                                            false        Node
persistentvolumeclaims                pvc                 v1                                            true         PersistentVolumeClaim
persistentvolumes                     pv                  v1                                            false        PersistentVolume
pods                                  po                  v1                                            true         Pod
podtemplates                                              v1                                            true         PodTemplate
replicationcontrollers                rc                  v1                                            true         ReplicationController
resourcequotas                        quota               v1                                            true         ResourceQuota
secrets                                                   v1                                            true         Secret
serviceaccounts                       sa                  v1                                            true         ServiceAccount
services                              svc                 v1                                            true         Service
mutatingwebhookconfigurations                             admissionregistration.k8s.io/v1               false        MutatingWebhookConfiguration
validatingwebhookconfigurations                           admissionregistration.k8s.io/v1               false        ValidatingWebhookConfiguration
customresourcedefinitions             crd,crds            apiextensions.k8s.io/v1                       false        CustomResourceDefinition
apiservices                                               apiregistration.k8s.io/v1                     false        APIService
apirequestcounts                                          apiserver.openshift.io/v1                     false        APIRequestCount
controllerrevisions                                       apps/v1                                       true         ControllerRevision
daemonsets                            ds                  apps/v1                                       true         DaemonSet
deployments                           deploy              apps/v1                                       true         Deployment
replicasets                           rs                  apps/v1                                       true         ReplicaSet
statefulsets                          sts                 apps/v1                                       true         StatefulSet
deploymentconfigs                     dc                  apps.openshift.io/v1                          true         DeploymentConfig
tokenreviews                                              authentication.k8s.io/v1                      false        TokenReview
localsubjectaccessreviews                                 authorization.k8s.io/v1                       true         LocalSubjectAccessReview
selfsubjectaccessreviews                                  authorization.k8s.io/v1                       false        SelfSubjectAccessReview
selfsubjectrulesreviews                                   authorization.k8s.io/v1                       false        SelfSubjectRulesReview
subjectaccessreviews                                      authorization.k8s.io/v1                       false        SubjectAccessReview
clusterrolebindings                                       authorization.openshift.io/v1                 false        ClusterRoleBinding
clusterroles                                              authorization.openshift.io/v1                 false        ClusterRole
localresourceaccessreviews                                authorization.openshift.io/v1                 true         LocalResourceAccessReview
localsubjectaccessreviews                                 authorization.openshift.io/v1                 true         LocalSubjectAccessReview
resourceaccessreviews                                     authorization.openshift.io/v1                 false        ResourceAccessReview
rolebindingrestrictions                                   authorization.openshift.io/v1                 true         RoleBindingRestriction
rolebindings                                              authorization.openshift.io/v1                 true         RoleBinding
roles                                                     authorization.openshift.io/v1                 true         Role
selfsubjectrulesreviews                                   authorization.openshift.io/v1                 true         SelfSubjectRulesReview
subjectaccessreviews                                      authorization.openshift.io/v1                 false        SubjectAccessReview
subjectrulesreviews                                       authorization.openshift.io/v1                 true         SubjectRulesReview
horizontalpodautoscalers              hpa                 autoscaling/v2                                true         HorizontalPodAutoscaler
clusterautoscalers                    ca                  autoscaling.openshift.io/v1                   false        ClusterAutoscaler
machineautoscalers                    ma                  autoscaling.openshift.io/v1beta1              true         MachineAutoscaler
cronjobs                              cj                  batch/v1                                      true         CronJob
jobs                                                      batch/v1                                      true         Job
buildconfigs                          bc                  build.openshift.io/v1                         true         BuildConfig
builds                                                    build.openshift.io/v1                         true         Build
certificatesigningrequests            csr                 certificates.k8s.io/v1                        false        CertificateSigningRequest
credentialsrequests                                       cloudcredential.openshift.io/v1               true         CredentialsRequest
apiservers                                                config.openshift.io/v1                        false        APIServer
authentications                                           config.openshift.io/v1                        false        Authentication
builds                                                    config.openshift.io/v1                        false        Build
clusteroperators                      co                  config.openshift.io/v1                        false        ClusterOperator
clusterversions                                           config.openshift.io/v1                        false        ClusterVersion
consoles                                                  config.openshift.io/v1                        false        Console
dnses                                                     config.openshift.io/v1                        false        DNS
featuregates                                              config.openshift.io/v1                        false        FeatureGate
imagecontentpolicies                                      config.openshift.io/v1                        false        ImageContentPolicy
images                                                    config.openshift.io/v1                        false        Image
infrastructures                                           config.openshift.io/v1                        false        Infrastructure
ingresses                                                 config.openshift.io/v1                        false        Ingress
networks                                                  config.openshift.io/v1                        false        Network
oauths                                                    config.openshift.io/v1                        false        OAuth
operatorhubs                                              config.openshift.io/v1                        false        OperatorHub
projects                                                  config.openshift.io/v1                        false        Project
proxies                                                   config.openshift.io/v1                        false        Proxy
schedulers                                                config.openshift.io/v1                        false        Scheduler
consoleclidownloads                                       console.openshift.io/v1                       false        ConsoleCLIDownload
consoleexternalloglinks                                   console.openshift.io/v1                       false        ConsoleExternalLogLink
consolelinks                                              console.openshift.io/v1                       false        ConsoleLink
consolenotifications                                      console.openshift.io/v1                       false        ConsoleNotification
consoleplugins                                            console.openshift.io/v1alpha1                 false        ConsolePlugin
consolequickstarts                                        console.openshift.io/v1                       false        ConsoleQuickStart
consoleyamlsamples                                        console.openshift.io/v1                       false        ConsoleYAMLSample
podnetworkconnectivitychecks                              controlplane.operator.openshift.io/v1alpha1   true         PodNetworkConnectivityCheck
leases                                                    coordination.k8s.io/v1                        true         Lease
endpointslices                                            discovery.k8s.io/v1                           true         EndpointSlice
events                                ev                  events.k8s.io/v1                              true         Event
fileintegrities                                           fileintegrity.openshift.io/v1alpha1           true         FileIntegrity
fileintegritynodestatuses                                 fileintegrity.openshift.io/v1alpha1           true         FileIntegrityNodeStatus
flowschemas                                               flowcontrol.apiserver.k8s.io/v1beta2          false        FlowSchema
prioritylevelconfigurations                               flowcontrol.apiserver.k8s.io/v1beta2          false        PriorityLevelConfiguration
helmchartrepositories                                     helm.openshift.io/v1beta1                     false        HelmChartRepository
projecthelmchartrepositories                              helm.openshift.io/v1beta1                     true         ProjectHelmChartRepository
images                                                    image.openshift.io/v1                         false        Image
imagesignatures                                           image.openshift.io/v1                         false        ImageSignature
imagestreamimages                     isimage             image.openshift.io/v1                         true         ImageStreamImage
imagestreamimports                                        image.openshift.io/v1                         true         ImageStreamImport
imagestreammappings                                       image.openshift.io/v1                         true         ImageStreamMapping
imagestreams                          is                  image.openshift.io/v1                         true         ImageStream
imagestreamtags                       istag               image.openshift.io/v1                         true         ImageStreamTag
imagetags                             itag                image.openshift.io/v1                         true         ImageTag
configs                                                   imageregistry.operator.openshift.io/v1        false        Config
imagepruners                                              imageregistry.operator.openshift.io/v1        false        ImagePruner
dnsrecords                                                ingress.operator.openshift.io/v1              true         DNSRecord
network-attachment-definitions        net-attach-def      k8s.cni.cncf.io/v1                            true         NetworkAttachmentDefinition
localvolumediscoveries                                    local.storage.openshift.io/v1alpha1           true         LocalVolumeDiscovery
localvolumediscoveryresults                               local.storage.openshift.io/v1alpha1           true         LocalVolumeDiscoveryResult
localvolumes                                              local.storage.openshift.io/v1                 true         LocalVolume
localvolumesets                       lvset,lvsets        local.storage.openshift.io/v1alpha1           true         LocalVolumeSet
machinehealthchecks                   mhc,mhcs            machine.openshift.io/v1beta1                  true         MachineHealthCheck
machines                                                  machine.openshift.io/v1beta1                  true         Machine
machinesets                                               machine.openshift.io/v1beta1                  true         MachineSet
containerruntimeconfigs               ctrcfg              machineconfiguration.openshift.io/v1          false        ContainerRuntimeConfig
controllerconfigs                                         machineconfiguration.openshift.io/v1          false        ControllerConfig
kubeletconfigs                                            machineconfiguration.openshift.io/v1          false        KubeletConfig
machineconfigpools                    mcp                 machineconfiguration.openshift.io/v1          false        MachineConfigPool
machineconfigs                        mc                  machineconfiguration.openshift.io/v1          false        MachineConfig
baremetalhosts                        bmh,bmhost          metal3.io/v1alpha1                            true         BareMetalHost
bmceventsubscriptions                 bes,bmcevent        metal3.io/v1alpha1                            true         BMCEventSubscription
firmwareschemas                                           metal3.io/v1alpha1                            true         FirmwareSchema
hostfirmwaresettings                  hfs                 metal3.io/v1alpha1                            true         HostFirmwareSettings
preprovisioningimages                 ppimg               metal3.io/v1alpha1                            true         PreprovisioningImage
provisionings                                             metal3.io/v1alpha1                            false        Provisioning
nodes                                                     metrics.k8s.io/v1beta1                        false        NodeMetrics
pods                                                      metrics.k8s.io/v1beta1                        true         PodMetrics
storagestates                                             migration.k8s.io/v1alpha1                     false        StorageState
storageversionmigrations                                  migration.k8s.io/v1alpha1                     false        StorageVersionMigration
alertmanagerconfigs                                       monitoring.coreos.com/v1alpha1                true         AlertmanagerConfig
alertmanagers                                             monitoring.coreos.com/v1                      true         Alertmanager
podmonitors                                               monitoring.coreos.com/v1                      true         PodMonitor
probes                                                    monitoring.coreos.com/v1                      true         Probe
prometheuses                                              monitoring.coreos.com/v1                      true         Prometheus
prometheusrules                                           monitoring.coreos.com/v1                      true         PrometheusRule
servicemonitors                                           monitoring.coreos.com/v1                      true         ServiceMonitor
thanosrulers                                              monitoring.coreos.com/v1                      true         ThanosRuler
clusternetworks                                           network.openshift.io/v1                       false        ClusterNetwork
egressnetworkpolicies                                     network.openshift.io/v1                       true         EgressNetworkPolicy
hostsubnets                                               network.openshift.io/v1                       false        HostSubnet
netnamespaces                                             network.openshift.io/v1                       false        NetNamespace
egressrouters                                             network.operator.openshift.io/v1              true         EgressRouter
operatorpkis                                              network.operator.openshift.io/v1              true         OperatorPKI
ingressclasses                                            networking.k8s.io/v1                          false        IngressClass
ingresses                             ing                 networking.k8s.io/v1                          true         Ingress
networkpolicies                       netpol              networking.k8s.io/v1                          true         NetworkPolicy
runtimeclasses                                            node.k8s.io/v1                                false        RuntimeClass
oauthaccesstokens                                         oauth.openshift.io/v1                         false        OAuthAccessToken
oauthauthorizetokens                                      oauth.openshift.io/v1                         false        OAuthAuthorizeToken
oauthclientauthorizations                                 oauth.openshift.io/v1                         false        OAuthClientAuthorization
oauthclients                                              oauth.openshift.io/v1                         false        OAuthClient
tokenreviews                                              oauth.openshift.io/v1                         false        TokenReview
useroauthaccesstokens                                     oauth.openshift.io/v1                         false        UserOAuthAccessToken
authentications                                           operator.openshift.io/v1                      false        Authentication
cloudcredentials                                          operator.openshift.io/v1                      false        CloudCredential
clustercsidrivers                                         operator.openshift.io/v1                      false        ClusterCSIDriver
configs                                                   operator.openshift.io/v1                      false        Config
consoles                                                  operator.openshift.io/v1                      false        Console
csisnapshotcontrollers                                    operator.openshift.io/v1                      false        CSISnapshotController
dnses                                                     operator.openshift.io/v1                      false        DNS
etcds                                                     operator.openshift.io/v1                      false        Etcd
imagecontentsourcepolicies                                operator.openshift.io/v1alpha1                false        ImageContentSourcePolicy
ingresscontrollers                                        operator.openshift.io/v1                      true         IngressController
kubeapiservers                                            operator.openshift.io/v1                      false        KubeAPIServer
kubecontrollermanagers                                    operator.openshift.io/v1                      false        KubeControllerManager
kubeschedulers                                            operator.openshift.io/v1                      false        KubeScheduler
kubestorageversionmigrators                               operator.openshift.io/v1                      false        KubeStorageVersionMigrator
networks                                                  operator.openshift.io/v1                      false        Network
openshiftapiservers                                       operator.openshift.io/v1                      false        OpenShiftAPIServer
openshiftcontrollermanagers                               operator.openshift.io/v1                      false        OpenShiftControllerManager
servicecas                                                operator.openshift.io/v1                      false        ServiceCA
storages                                                  operator.openshift.io/v1                      false        Storage
catalogsources                        catsrc              operators.coreos.com/v1alpha1                 true         CatalogSource
clusterserviceversions                csv,csvs            operators.coreos.com/v1alpha1                 true         ClusterServiceVersion
installplans                          ip                  operators.coreos.com/v1alpha1                 true         InstallPlan
olmconfigs                                                operators.coreos.com/v1                       false        OLMConfig
operatorconditions                    condition           operators.coreos.com/v2                       true         OperatorCondition
operatorgroups                        og                  operators.coreos.com/v1                       true         OperatorGroup
operators                                                 operators.coreos.com/v1                       false        Operator
subscriptions                         sub,subs            operators.coreos.com/v1alpha1                 true         Subscription
packagemanifests                                          packages.operators.coreos.com/v1              true         PackageManifest
poddisruptionbudgets                  pdb                 policy/v1                                     true         PodDisruptionBudget
podsecuritypolicies                   psp                 policy/v1beta1                                false        PodSecurityPolicy
projectrequests                                           project.openshift.io/v1                       false        ProjectRequest
projects                                                  project.openshift.io/v1                       false        Project
appliedclusterresourcequotas                              quota.openshift.io/v1                         true         AppliedClusterResourceQuota
clusterresourcequotas                 clusterquota        quota.openshift.io/v1                         false        ClusterResourceQuota
clusterrolebindings                                       rbac.authorization.k8s.io/v1                  false        ClusterRoleBinding
clusterroles                                              rbac.authorization.k8s.io/v1                  false        ClusterRole
rolebindings                                              rbac.authorization.k8s.io/v1                  true         RoleBinding
roles                                                     rbac.authorization.k8s.io/v1                  true         Role
routes                                                    route.openshift.io/v1                         true         Route
configs                                                   samples.operator.openshift.io/v1              false        Config
priorityclasses                       pc                  scheduling.k8s.io/v1                          false        PriorityClass
rangeallocations                                          security.internal.openshift.io/v1             false        RangeAllocation
podsecuritypolicyreviews                                  security.openshift.io/v1                      true         PodSecurityPolicyReview
podsecuritypolicyselfsubjectreviews                       security.openshift.io/v1                      true         PodSecurityPolicySelfSubjectReview
podsecuritypolicysubjectreviews                           security.openshift.io/v1                      true         PodSecurityPolicySubjectReview
rangeallocations                                          security.openshift.io/v1                      false        RangeAllocation
securitycontextconstraints            scc                 security.openshift.io/v1                      false        SecurityContextConstraints
volumesnapshotclasses                 vsclass,vsclasses   snapshot.storage.k8s.io/v1                    false        VolumeSnapshotClass
volumesnapshotcontents                vsc,vscs            snapshot.storage.k8s.io/v1                    false        VolumeSnapshotContent
volumesnapshots                       vs                  snapshot.storage.k8s.io/v1                    true         VolumeSnapshot
csidrivers                                                storage.k8s.io/v1                             false        CSIDriver
csinodes                                                  storage.k8s.io/v1                             false        CSINode
csistoragecapacities                                      storage.k8s.io/v1beta1                        true         CSIStorageCapacity
storageclasses                        sc                  storage.k8s.io/v1                             false        StorageClass
volumeattachments                                         storage.k8s.io/v1                             false        VolumeAttachment
brokertemplateinstances                                   template.openshift.io/v1                      false        BrokerTemplateInstance
processedtemplates                                        template.openshift.io/v1                      true         Template
templateinstances                                         template.openshift.io/v1                      true         TemplateInstance
templates                                                 template.openshift.io/v1                      true         Template
profiles                                                  tuned.openshift.io/v1                         true         Profile
tuneds                                                    tuned.openshift.io/v1                         true         Tuned
groups                                                    user.openshift.io/v1                          false        Group
identities                                                user.openshift.io/v1                          false        Identity
useridentitymappings                                      user.openshift.io/v1                          false        UserIdentityMapping
users                                                     user.openshift.io/v1                          false        User
ippools                                                   whereabouts.cni.cncf.io/v1alpha1              true         IPPool
overlappingrangeipreservations                            whereabouts.cni.cncf.io/v1alpha1              true         OverlappingRangeIPReservation
ocp:x:974:974:User to test OpenShift cluster:/home/ocp:/bin/bash
Login successful.

You have access to 66 projects, the list has been suppressed. You can list all projects with 'oc projects'

Using project "default".
Login successful.

You have access to 66 projects, the list has been suppressed. You can list all projects with 'oc projects'

Using project "default".


Setting up the classroom for Guided Exercise: Troubleshooting OpenShift Certificates

 Preparing the student's cluster:


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Download exercise files..................................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
/home/student/DO380/labs /home/student
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!
/home/student


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Modifying /etc/ansible/ansible.cfg.......................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Backing up PKI configuration................................ !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

PLAY [Backing up PKI configuration files] **************************************

TASK [include_role : backup] ***************************************************

TASK [backup : Ensure the backup directory exists] *****************************
ok: [localhost]

TASK [backup : Ensure the backup exists] ***************************************
changed: [localhost]

PLAY RECAP *********************************************************************
localhost                  : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Creating Classroom CA Certificate........................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

PLAY [Configure Classroom Certificate Authority] *******************************

TASK [Gathering Facts] *********************************************************
ok: [localhost]

TASK [Check if classroom-ca-key.pem exists] ************************************
ok: [localhost]

TASK [Generate a CA private key] ***********************************************
changed: [localhost]

TASK [Check if classroom-ca.pem exists] ****************************************
ok: [localhost]

TASK [Generate a CA certificate signing request] *******************************
changed: [localhost]

TASK [Generate a CA self-signed certificate] ***********************************
changed: [localhost]

TASK [Add comment to top of classroom-ca.pem] **********************************
changed: [localhost]

TASK [Create a certificate hard-link in /etc/pki/ca-trust/source/anchors/] *****
changed: [localhost]

TASK [Remove the CA CSR file] **************************************************
changed: [localhost]

TASK [Configure system to trust classroom-ca.pem] ******************************
changed: [localhost]

PLAY RECAP *********************************************************************
localhost                  : ok=10   changed=7    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Creating Wildcard Certificate............................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

PLAY [Create Wildcard Certificate] *********************************************

TASK [Gathering Facts] *********************************************************
ok: [localhost]

TASK [Classroom CA: Check if /etc/pki/tls/certs/classroom-ca.pem exists] *******
ok: [localhost]

TASK [Classroom CA: Fail if /etc/pki/tls/certs/classroom-ca.pem does not exist] ***
skipping: [localhost]

TASK [Classroom CA: Check if /etc/pki/tls/private/classroom-ca-key.pem exists] ***
ok: [localhost]

TASK [Classroom CA: Fail if /etc/pki/tls/private/classroom-ca-key.pem does not exist] ***
skipping: [localhost]

TASK [Check if wildcard.pem exists in /etc/pki/tls/certs/] *********************
ok: [localhost]

TASK [Check if wildcard.pem exists in /home/student/DO380/labs/certificates-troubleshoot] ***
ok: [localhost]

TASK [Check if wildcard-key.pem exists in /etc/pki/tls/private/] ***************
ok: [localhost]

TASK [Ensure certs directory exist] ********************************************
ok: [localhost]

TASK [Create a hard-link to the private key] ***********************************
skipping: [localhost]

TASK [Create a hard-link to the certificate] ***********************************
skipping: [localhost]

TASK [Remove certificate hard link] ********************************************
ok: [localhost]

TASK [Generate a wildcard private key] *****************************************
changed: [localhost]

TASK [Create a hard-link to the wildcard private key] **************************
changed: [localhost]

TASK [Generate a wildcard certificate signing request] *************************
changed: [localhost]

TASK [Generate a wildcard certificate] *****************************************
changed: [localhost]

TASK [Add comment to top of wildcard.pem] **************************************
changed: [localhost]

TASK [Create a hard-link to the wildcard certificate] **************************
changed: [localhost]

TASK [Remove the CSR file] *****************************************************
changed: [localhost]

TASK [Check if wildcard-combined.pem exists in /etc/pki/tls/certs/] ************
ok: [localhost]

TASK [Create a combined certificate] *******************************************
ok: [localhost]

TASK [Create a hard-link to the combined certificate] **************************
changed: [localhost]

PLAY RECAP *********************************************************************
localhost                  : ok=18   changed=8    unreachable=0    failed=0    skipped=4    rescued=0    ignored=0   

!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Creating 'wildcard-bundle' configuration map................ !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
configmap/wildcard-bundle created
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Patching the cluster-wide proxy............................. !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
proxy.config.openshift.io/cluster patched
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Creating 'wildcard-tls' secret.............................. !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
secret/wildcard-tls created
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Patching the default ingress controller operator............ !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
ingresscontroller.operator.openshift.io/default patched
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Creating Master API Certificate............................. !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

PLAY [Create Custom Certificate] ***********************************************

TASK [Gathering Facts] *********************************************************
ok: [localhost]

TASK [Classroom CA: Check if /etc/pki/tls/certs/classroom-ca.pem exists] *******
ok: [localhost]

TASK [Classroom CA: Fail if /etc/pki/tls/certs/classroom-ca.pem does not exist] ***
skipping: [localhost]

TASK [Classroom CA: Check if /etc/pki/tls/private/classroom-ca-key.pem exists] ***
ok: [localhost]

TASK [Classroom CA: Fail if /etc/pki/tls/private/classroom-ca-key.pem does not exist] ***
skipping: [localhost]

TASK [Check if api.pem exists in /etc/pki/tls/certs/] **************************
ok: [localhost]

TASK [Check if api.pem exists in /home/student/DO380/labs/certificates-troubleshoot] ***
ok: [localhost]

TASK [Check if api-key.pem exists in /etc/pki/tls/private/] ********************
ok: [localhost]

TASK [Ensure certs directory exist] ********************************************
ok: [localhost]

TASK [Create a hard-link to the private key] ***********************************
skipping: [localhost]

TASK [Create a hard-link to the certificate] ***********************************
skipping: [localhost]

TASK [Remove certificate hard link] ********************************************
ok: [localhost]

TASK [Generate a api private key] **********************************************
changed: [localhost]

TASK [Create a hard-link to the private key] ***********************************
changed: [localhost]

TASK [Generate a api certificate signing request] ******************************
changed: [localhost]

TASK [Generate a api certificate] **********************************************
changed: [localhost]

TASK [Add comment to top of api.pem] *******************************************
changed: [localhost]

TASK [Create a hard-link to the certificate] ***********************************
changed: [localhost]

TASK [Remove the CSR file] *****************************************************
changed: [localhost]

TASK [Check if api-combined.pem exists in /etc/pki/tls/certs/] *****************
ok: [localhost]

TASK [Create a combined certificate] *******************************************
ok: [localhost]

TASK [Create a hard-link to the combined certificate] **************************
changed: [localhost]

PLAY RECAP *********************************************************************
localhost                  : ok=18   changed=8    unreachable=0    failed=0    skipped=4    rescued=0    ignored=0   

!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Creating 'api-tls' secret................................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
secret/api-tls created
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Patching the cluster apiserver.............................. !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
apiserver.config.openshift.io/cluster patched
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!



!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!Overall start status........................................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!



#################### Sun Dec 10 03:19:57 EST 2023 ####################


Completing Guided Exercise: Troubleshooting OpenShift Certificates



!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Restoring PKI configuration................................. !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

PLAY [Restoring PKI configuration files] ***************************************

TASK [Ensure the custom PKI files are removed] *********************************
ok: [localhost] => (item=/etc/pki/tls/certs/classroom-ca.csr)
changed: [localhost] => (item=/etc/pki/tls/certs/classroom-ca.pem)
changed: [localhost] => (item=/etc/pki/tls/private/classroom-ca-key.pem)
changed: [localhost] => (item=/etc/pki/ca-trust/source/anchors/classroom-ca.pem)
ok: [localhost] => (item=/tmp/certs)
ok: [localhost] => (item=/etc/pki/tls/certs/wildcard-api.pem)
ok: [localhost] => (item=/etc/pki/tls/certs/wildcard-api.csr)
ok: [localhost] => (item=/etc/pki/tls/private/wildcard-api-key.pem)
ok: [localhost] => (item=/etc/pki/tls/certs/combined-cert.pem)
changed: [localhost] => (item=/etc/pki/tls/certs/wildcard.pem)
changed: [localhost] => (item=/etc/pki/tls/certs/wildcard-combined.pem)
changed: [localhost] => (item=/etc/pki/tls/private/wildcard-key.pem)
changed: [localhost] => (item=/etc/pki/tls/certs/api.pem)
changed: [localhost] => (item=/etc/pki/tls/certs/api-combined.pem)
ok: [localhost] => (item=/etc/pki/tls/certs/custom.pem)
ok: [localhost] => (item=/etc/pki/tls/private/custom-key.pem)
ok: [localhost] => (item=/etc/pki/tls/certs/custom-combined.pem)
ok: [localhost] => (item=/etc/pki/tls/private/custom-combined-key.pem)
changed: [localhost] => (item=/etc/pki/tls/private/api-key.pem)
ok: [localhost] => (item=/etc/pki/tls/certs/review.pem)
ok: [localhost] => (item=/etc/pki/tls/private/review-key.pem)
ok: [localhost] => (item=/etc/pki/tls/certs/review-combined.pem)
ok: [localhost] => (item=/etc/pki/tls/private/review-combined-key.pem)

TASK [include_role : restore] **************************************************

TASK [restore : Checking if the backup exists] *********************************
ok: [localhost]

TASK [restore : Ensure the backup is restored] *********************************
changed: [localhost]

TASK [restore : Ensure the backup is removed] **********************************
changed: [localhost]

PLAY RECAP *********************************************************************
localhost                  : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Cleaning up the OpenShift resources......................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

PLAY [Cleaning up OpenShift custom CA] *****************************************

TASK [Ensure the API server CA configuration is restored] **********************
changed: [localhost]

TASK [Ensure the proxy CA configuration is restored] ***************************
changed: [localhost]

TASK [Ensure the ingress controller CA configuration is restored] **************
changed: [localhost]

TASK [Ensure the exercise secrets are removed] *********************************
ok: [localhost] => (item={'name': 'custom-tls', 'namespace': 'openshift-config'})
ok: [localhost] => (item={'name': 'custom-tls-bundle', 'namespace': 'openshift-ingress'})
changed: [localhost] => (item={'name': 'wildcard-tls', 'namespace': 'openshift-ingress'})
changed: [localhost] => (item={'name': 'api-tls', 'namespace': 'openshift-config'})
ok: [localhost] => (item={'name': 'review-tls', 'namespace': 'openshift-ingress'})
ok: [localhost] => (item={'name': 'review-tls', 'namespace': 'openshift-config'})

TASK [Ensure the exercise configuration maps are removed] **********************
ok: [localhost] => (item={'name': 'combined-certs', 'namespace': 'openshift-config'})
changed: [localhost] => (item={'name': 'wildcard-bundle', 'namespace': 'openshift-config'})
ok: [localhost] => (item={'name': 'review-bundle', 'namespace': 'openshift-config'})

PLAY RECAP *********************************************************************
localhost                  : ok=5    changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! Â· Remove exercise files....................................... !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!! SUCCESS !!!!!!!!!!!!!!!!!!!!!!!!!!!!

Please use start if you wish to do the exercise again.

